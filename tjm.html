<!DOCTYPE html>

<html>
<head>
<!-- Oh it pains me to do this, but excanvas don't work properly unless this
is active.  Seems to be a "feature" of adding the canvas element on the fly
as opposed to having it static on the page.-->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">

<title>Highland Dots</title>
  <link rel="stylesheet" type="text/css" href="layout.css">

<!--[if IE]>
<script src="jslib/excanvas.js"></script>
<![endif]-->

<script src="jslib/canvas.text.js"></script>
<script src="jslib/helvetiker-normal-normal.js"></script>
<script src="jslib/helvetiker-bold-normal.js"></script>

</head>

<body>
<p>
  <img src="pics/logo.gif" width="43px" height="52px" border="0" onclick="devCon();">
  <span id="timeinfo">Time: Not  yet rendered.</span>
</p>


<div id="canvas_div"><p id="hdots_canvas">The music goes here</p></div>


<script type='text/javascript' src='tools.js'></script>
<script type='text/javascript' src='mylib.js'></script>
<script type='text/javascript' src='hdots.js'></script>

<script type='text/javascript' src='bwwimport.js'></script>

<script type='text/javascript' src='scoreelement.js'></script>
<script type='text/javascript' src='mom.js'></script>

<script type='text/javascript' src='note.js'></script>
<script type='text/javascript' src='melody.js'></script>
<script type='text/javascript' src='timesig.js'></script>
<script type='text/javascript' src='staffcontrol.js'></script>
<script type='text/javascript' src='embellishment.js'></script>
<script type='text/javascript' src='graphicelement.js'></script>
<script type='text/javascript' src='beamgroup.js'></script>
<script type='text/javascript' src='phrasegroup.js'></script>
<script type='text/javascript' src='text.js'></script>

<script type='text/javascript' src='imagemap.js'></script>
<script type='text/javascript' src='beautifyscore.js'></script>

<script>

function localPathToURI(path) {
	var uri = path;
	uri = uri.replace(/\\/g, '/');
	uri = uri.replace(/:/g, '|');
	uri = "file://" + uri;
	return uri;
}

function loadFromEditor() {
	var t = document.getElementById('editor').value;
	uiLoadTune('bww', t);
	devCon();
}

function handleLoadTunes(list) {
	var t = list[0].getAsText("");
	document.getElementById('editor').value = t;
	uiLoadTune('bww', t);
	devCon();
}

function reload() {
	plotMusic(score);
}

function doEval(elemId) {
	var o = document.getElementById(elemId);
	if (o.value && o.value.length > 0) eval(o.value);
}

function devCon() {
	var s = document.getElementById('devcon').style;
	s.display = (s.display === "none") ? "inline" : "none";

}


</script>
<p id="status">
&nbsp;
</p>

<pre id="log"></pre>

<map name="hDotsMap" id="hDotsMap">
<area shape="polygon" coords="19,44,45,11,87,37,82,76,49,98" href="http://www.trees.com/save.html">
<area shape="rect" coords="128,132,241,179" href="http://www.trees.com/furniture.html">
<area shape="circle" coords="68,211,35" href="http://www.trees.com/plantations.html">
</map>

<div id="devcon" style="position:absolute; left:0px; top:0px; display:none; background-color:#FFFFFF; overflow:auto; height:100%; width:100%; z-index:100;">
  <img src="pics/logo.gif" width="43px" height="52px" border="0" onclick="devCon();">
  <br />

  <span>
    Note Color:    <select onChange="staff.details.noteColor1=this.options[this.selectedIndex].value;">
                     <option value="black">Black</option>
                     <option value="red">Red</option>
                     <option value="green">Green</option>
                     <option value="blue">Blue</option>
                   </select>
    &nbsp; &nbsp; &nbsp; &nbsp;
    Beaming Style: <select onChange="staff.details.beamStyle=this.options[this.selectedIndex].value;">
                     <option value="bww">BWW</option>
                     <option value="straight">Straight</option>
                     <option value="sloped">Sloped</option>
                   </select>
  </span>
  &nbsp; &nbsp; &nbsp; &nbsp;
  <span>
    <input type="checkbox" onChange="(this.checked)?staff.details.uiTracing=true:staff.details.uiTracing=false;"/> UI Tracing
    &nbsp; &nbsp; &nbsp; &nbsp;
    <input type="checkbox" onChange="(this.checked)?staff.details.logging=true:staff.details.logging=false;"/> Logging
  </span>
  <br />

  <input type="text"size="60" id="jsToEval" value="" />
  <button onclick="doEval('jsToEval');" >Eval</button>
  <br />

  <input type="file" onchange="handleLoadTunes(this.files);" />
  <br />
  <button onclick="plotMusic(score);">Reload</button> <button onclick="loadFromEditor();">Load from editor</button>
  <button onclick="testImport2()">Internal notation test</button>
  <br />
  <p><b>Current Local Tune</b></p>
  <textarea id="editor" style="width:80%; height:300px; overflow:auto; border:1px solid black">
  Locally loaded tunes will go here.
  </textarea>

  </iframe>
</div>

</body>
</html>
